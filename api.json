{"openapi":"3.1.0","info":{"title":"Backend API","version":"1.0"},"paths":{"/health/":{"get":{"tags":["health"],"summary":"Проверка состояния сервера","description":"Возвращает статус сервера и проверяет соединение с БД.","operationId":"health_check_health__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Not found"}}}},"/auth/register/telegram":{"post":{"tags":["auth"],"summary":"Аутентификация / Регистрация Telegram-пользователя","description":"Регистрирует пользователя через Telegram, используя данные, полученные от Telegram login widget (см. схему `TelegramRegisterRequest`).\n\nЕсли пользователь уже зарегистрирован, возвращается статус 200 и токен для верификации.\nЕсли создается новый пользователь, возвращается статус 201 и токен для аутентификации.","operationId":"handle_tg_registration_auth_register_telegram_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TelegramRegisterRequest"}}},"required":true},"responses":{"200":{"description":"Пользователь уже существует, возвращается токен","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericResponse"}}}},"404":{"description":"Not found"},"201":{"description":"Пользователь зарегистрирован, возвращается токен"},"422":{"description":"Ошибка валидации входных данных","content":{"application/json":{"example":{"detail":[{"loc":["body","telegram_id"],"msg":"field required","type":"value_error.missing"}]}}}},"500":{"description":"Внутренняя ошибка сервера","content":{"application/json":{"example":{"detail":"Internal Server Error"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/openapi.json":{"get":{"summary":"Get Openapi Json","operationId":"get_openapi_json_openapi_json_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/openapi.yaml":{"get":{"summary":"Get Openapi Yaml","operationId":"get_openapi_yaml_openapi_yaml_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"GenericResponse":{"properties":{"message":{"type":"string","title":"Message"}},"type":"object","required":["message"],"title":"GenericResponse"},"TelegramRegisterRequest":{"properties":{"telegram_id":{"type":"integer","title":"Telegram Id"},"first_name":{"type":"string","title":"First Name"},"last_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Name"},"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"},"photo_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Photo Url"},"auth_date":{"type":"integer","title":"Auth Date"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"}},"type":"object","required":["telegram_id","first_name","auth_date"],"title":"TelegramRegisterRequest","description":"auth_date: int\n            Временная метка (Unix timestamp) момента аутентификации пользователя через Telegram Login Widget.\n            Используется для проверки актуальности данных и защиты от подделки (Replay Attack).\n            Клиентская сторона должна передавать текущее время запроса и сверять его с допустимым окном времени (например, 5–10 минут)."}}}}