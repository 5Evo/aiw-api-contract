{"openapi":"3.1.0","info":{"title":"Backend API","version":"1.0"},"paths":{"/health/":{"get":{"tags":["health"],"summary":"Health Check","operationId":"health_check_health__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Not found"}}}},"/auth/register/telegram":{"post":{"tags":["auth"],"summary":"Регистрация Telegram-пользователя","description":"Регистрирует пользователя через Telegram, используя данные, полученные от Telegram login widget.","operationId":"handle_tg_registration_auth_register_telegram_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TelegramRegisterRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_id}":{"get":{"tags":["users"],"summary":"Get User","description":"Получение информации о пользователе по его ID.\n\n- **user_id**: Уникальный идентификатор пользователя в системе.\n\nВозвращает информацию о пользователе, включая:\n- `id`: Идентификатор пользователя.\n- `email`: Электронная почта пользователя.\n- `phone`: Телефон пользователя.\n\n**Ответы:**\n- 200 OK: Если пользователь найден, возвращаются его данные.\n- 404 Not Found: Если пользователь с указанным ID не найден.\n- 500 Internal Server Error: Если произошла ошибка при запросе данных пользователя.","operationId":"get_user_users__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["users"],"summary":"Update User Data","description":"Обновление данных пользователя по его ID.\n\n- **user_id**: Уникальный идентификатор пользователя в системе.\n- **user_update**: Объект, содержащий данные для обновления пользователя, включая:\n    - `email`: Новая электронная почта пользователя.\n    - `phone`: Новый телефон пользователя.\n\n**Ответы:**\n- 200 OK: Если данные пользователя успешно обновлены, возвращаются обновленные данные пользователя.\n- 404 Not Found: Если пользователь с указанным ID не найден.\n- 400 Bad Request: Если в запросе отсутствуют обязательные поля или они неверного формата.\n- 500 Internal Server Error: Если произошла ошибка при обновлении данных пользователя.\n\n**Пример успешного ответа:**\n```json\n{\n  \"id\": 1,\n  \"email\": \"updateduser@example.com\",\n  \"phone\": \"987654321\"\n}\n```\n\n**Пример ошибки 404 (пользователь не найден):**\n```json\n{\n  \"detail\": \"User with this ID not found.\"\n}\n```\n\n**Пример ошибки 400 (неправильные данные):**\n```json\n{\n  \"detail\": \"Invalid email format.\"\n}\n```\n\n**Пример ошибки 500 (технический сбой):**\n```json\n{\n  \"detail\": \"An error occurred while updating the user: [описание ошибки]\"\n}","operationId":"update_user_data_users__user_id__put","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["users"],"summary":"Delete User Account","description":"Удаление пользователя по его ID.\n\n- **user_id**: Уникальный идентификатор пользователя.\n\n**Ответы:**\n- 200 OK: Если пользователь успешно удален.\n- 404 Not Found: Если пользователь с указанным ID не найден.\n- 500 Internal Server Error: Если произошла ошибка при удалении пользователя.","operationId":"delete_user_account_users__user_id__delete","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/me":{"get":{"tags":["users"],"summary":"Get User Info Me","description":"Получение информации о текущем пользователе.\n\nВозвращает расширенную информацию о текущем пользователе, включая:\n- `id`: Идентификатор пользователя.\n- `email`: Электронная почта пользователя.\n- `phone`: Телефон пользователя.\n- `telegram_id`: ID привязанного Telegram-аккаунта (если есть).\n\n**Ответы:**\n- 200 OK: Если пользователь найден, возвращаются его данные.\n- 401 Unauthorized: Если пользователь не аутентифицирован.\n- 500 Internal Server Error: Если произошла ошибка при получении данных пользователя.","operationId":"get_user_info_me_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInfoResponse"}}}},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/{user_id}/telegram/request_code":{"post":{"tags":["users"],"summary":"Request Telegram Code","description":"Запрос кода для привязки Telegram к аккаунту пользователя.\n\n- **user_id**: Уникальный идентификатор пользователя.\n\nВозвращает сгенерированный код, который используется для привязки аккаунта Telegram.\n\n**Ответы:**\n- 200 OK: Код успешно сгенерирован.\n- 404 Not Found: Если пользователь с указанным ID не найден.\n- 500 Internal Server Error: В случае технической ошибки при генерации кода.","operationId":"request_telegram_code_users__user_id__telegram_request_code_post","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TelegramCodeResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_id}/telegram/bind":{"post":{"tags":["users"],"summary":"Bind Telegram","description":"Привязка Telegram к аккаунту пользователя.\n\n- **user_id**: Уникальный идентификатор пользователя.\n- **telegram_id**: Идентификатор Telegram-аккаунта.\n- **telegram_code**: Код подтверждения для привязки.\n\nПривязывает Telegram к аккаунту пользователя.\n\n**Ответы:**\n- 200 OK: Telegram успешно привязан.\n- 400 Bad Request: Код привязки недействителен или устарел.\n- 404 Not Found: Пользователь не найден.\n- 500 Internal Server Error: Ошибка на сервере при привязке Telegram.","operationId":"bind_telegram_users__user_id__telegram_bind_post","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BindTelegramRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_id}/info":{"get":{"tags":["users"],"summary":"Get Extended User Info","description":"Получение расширенной информации о пользователе, включая данные Telegram.\n\n- **user_id**: Уникальный идентификатор пользователя в системе.\n\n**Возвращает:**\n- `id`: Идентификатор пользователя.\n- `email`: Электронная почта пользователя.\n- `phone`: Телефон пользователя.\n- `telegram_id`: Идентификатор Telegram (если привязан).\n\n**Ответы:**\n- 200 OK: Если пользователь найден, возвращаются его данные.\n- 404 Not Found: Если пользователь с указанным ID не найден.\n- 500 Internal Server Error: Если произошла ошибка при запросе данных пользователя.","operationId":"get_extended_user_info_users__user_id__info_get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInfoResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tg/webhook":{"post":{"tags":["telegram"],"summary":"Telegram Webhook","description":"Обработчик webhook для Telegram.\n\nПринимает обновления от Telegram Bot API в формате JSON.\nОбновление может содержать сообщение, callback_query или другой тип данных.\n\nЛогика обработки обновлений:\n- Если получено сообщение с командой /bind, можно инициировать процесс привязки (или передать в user-сервис).\n- Если получено сообщение для проверки оплаты/тарифа, делегировать соответствующую логику.\n- Для остальных случаев – логирование и выполнение базовой обработки.\n\nВ этом эндпоинте рекомендуется минимальная бизнес-логика – основной функционал должен делегироваться в соответствующий сервисный слой (например, `telegram_service`).","operationId":"telegram_webhook_tg_webhook_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TelegramUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tg/test":{"get":{"tags":["telegram"],"summary":"Test Endpoint","description":"Тестовый эндпоинт для проверки работы маршрута Telegram.","operationId":"test_endpoint_tg_test_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Not found"}}}},"/payments/initiate":{"post":{"tags":["payments"],"summary":"Initiate Payment","description":"Инициировать новый платёж.","operationId":"initiate_payment_payments_initiate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentInitiateRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentInitiateResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/payments/status/{payment_id}":{"get":{"tags":["payments"],"summary":"Get Payment Status","description":"Получить статус конкретного платежа по идентификатору.","operationId":"get_payment_status_payments_status__payment_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"payment_id","in":"path","required":true,"schema":{"type":"string","title":"Payment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentStatusResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/payments/callback":{"post":{"tags":["payments"],"summary":"Payment Callback","description":"Обработчик callback (webhook) от платежного шлюза.","operationId":"payment_callback_payments_callback_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentCallbackRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/payments/refund":{"post":{"tags":["payments"],"summary":"Refund Payment","description":"Запросить возврат (refund) по платежу.","operationId":"refund_payment_payments_refund_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefundRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefundResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/payments/history":{"get":{"tags":["payments"],"summary":"Get Payments","description":"Получить историю платежей для текущего пользователя.","operationId":"get_payments_payments_history_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/PaymentItem"},"type":"array","title":"Response Get Payments Payments History Get"}}}},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}]}},"/subscriptions/plans":{"get":{"tags":["subscriptions"],"summary":"List Subscription Plans","description":"Получение списка доступных тарифных планов для подписок.\nДанный эндпоинт может быть публичным.","operationId":"list_subscription_plans_subscriptions_plans_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SubscriptionPlan"},"type":"array","title":"Response List Subscription Plans Subscriptions Plans Get"}}}},"404":{"description":"Not found"}}}},"/subscriptions/create":{"post":{"tags":["subscriptions"],"summary":"Create Subscription","description":"Создание подписки для текущего пользователя.\n\n- **plan_id**: идентификатор выбранного тарифного плана\n\nЗдесь может происходить инициирование платежа через модуль payments,\nпосле успешной оплаты подписка активируется.","operationId":"create_subscription_subscriptions_create_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSubscriptionRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/subscriptions/me":{"get":{"tags":["subscriptions"],"summary":"Get My Subscription","description":"Получение информации о текущей подписке пользователя.\n\nВозвращает данные подписки, включая тарифный план и статус подписки.","operationId":"get_my_subscription_subscriptions_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionResponse"}}}},"404":{"description":"Not found"}},"security":[{"OAuth2PasswordBearer":[]}]}},"/subscriptions/{subscription_id}":{"put":{"tags":["subscriptions"],"summary":"Update Subscription","description":"Обновление подписки, например, смена тарифного плана.\n\n- **new_plan_id**: идентификатор нового тарифного плана\n\nПосле обновления может потребоваться дополнительная оплата.","operationId":"update_subscription_subscriptions__subscription_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"subscription_id","in":"path","required":true,"schema":{"type":"string","title":"Subscription Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSubscriptionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/subscriptions/{subscription_id}/cancel":{"post":{"tags":["subscriptions"],"summary":"Cancel Subscription","description":"Отмена активной подписки.\n\n- **cancel_immediately**: если true, подписка отменяется сразу; иначе — до конца оплаченного периода.","operationId":"cancel_subscription_subscriptions__subscription_id__cancel_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"subscription_id","in":"path","required":true,"schema":{"type":"string","title":"Subscription Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancelSubscriptionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/requests/logs":{"get":{"tags":["requests"],"summary":"List Request Logs","description":"Получение логов запросов с возможностью фильтрации по периоду, эндпоинту, статусу и пользователю.\nПоддерживается пагинация через параметры limit и offset.","operationId":"list_request_logs_requests_logs_get","parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Начало периода для фильтрации логов","title":"Start Date"},"description":"Начало периода для фильтрации логов"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Конец периода для фильтрации логов","title":"End Date"},"description":"Конец периода для фильтрации логов"},{"name":"endpoint","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Фильтр по endpoint","title":"Endpoint"},"description":"Фильтр по endpoint"},{"name":"status_code","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Фильтр по статус-коду","title":"Status Code"},"description":"Фильтр по статус-коду"},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Фильтр по идентификатору пользователя","title":"User Id"},"description":"Фильтр по идентификатору пользователя"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","description":"Количество записей для возврата","default":100,"title":"Limit"},"description":"Количество записей для возврата"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","description":"Смещение записей для пагинации","default":0,"title":"Offset"},"description":"Смещение записей для пагинации"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RequestLog"},"title":"Response List Request Logs Requests Logs Get"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/requests/summary":{"get":{"tags":["requests"],"summary":"Summary Request Logs","description":"Получение сводной статистики по запросам за указанный период.\nВключает общее количество запросов, среднее время ответа и распределение по эндпоинтам.","operationId":"summary_request_logs_requests_summary_get","parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Начало периода для сводной статистики","title":"Start Date"},"description":"Начало периода для сводной статистики"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Конец периода для сводной статистики","title":"End Date"},"description":"Конец периода для сводной статистики"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestSummary"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/requests/metrics":{"get":{"tags":["requests"],"summary":"Metrics Request Logs","description":"Получение агрегированных метрик по каждому эндпоинту.\nМетрики включают общее количество запросов, среднее время ответа и процент успешных запросов.","operationId":"metrics_request_logs_requests_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/RequestMetrics"},"type":"array","title":"Response Metrics Request Logs Requests Metrics Get"}}}},"404":{"description":"Not found"}}}},"/subscription-plans/":{"get":{"tags":["Subscription Plans"],"summary":"Get All Plans","description":"Получить список всех тарифных планов.","operationId":"get_all_plans_subscription_plans__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SubscriptionPlanResponse"},"type":"array","title":"Response Get All Plans Subscription Plans  Get"}}}},"404":{"description":"Not found"}}},"post":{"tags":["Subscription Plans"],"summary":"Create Plan","description":"Создать новый тарифный план подписки.","operationId":"create_plan_subscription_plans__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionPlanCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionPlanResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/subscription-plans/{plan_id}":{"get":{"tags":["Subscription Plans"],"summary":"Get Plan By Id","description":"Получить тарифный план по ID.","operationId":"get_plan_by_id_subscription_plans__plan_id__get","parameters":[{"name":"plan_id","in":"path","required":true,"schema":{"type":"integer","title":"Plan Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionPlanResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Subscription Plans"],"summary":"Update Plan","description":"Обновить существующий тарифный план.","operationId":"update_plan_subscription_plans__plan_id__put","parameters":[{"name":"plan_id","in":"path","required":true,"schema":{"type":"integer","title":"Plan Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionPlanUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionPlanResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Subscription Plans"],"summary":"Delete Plan","description":"Удалить тарифный план по ID.","operationId":"delete_plan_subscription_plans__plan_id__delete","parameters":[{"name":"plan_id","in":"path","required":true,"schema":{"type":"integer","title":"Plan Id"}}],"responses":{"204":{"description":"Successful Response"},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/openapi.json":{"get":{"summary":"Get Openapi Json","operationId":"get_openapi_json_openapi_json_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/openapi.yaml":{"get":{"summary":"Get Openapi Yaml","operationId":"get_openapi_yaml_openapi_yaml_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"BindTelegramRequest":{"properties":{"telegram_id":{"type":"integer","title":"Telegram Id"},"telegram_code":{"type":"string","title":"Telegram Code"}},"type":"object","required":["telegram_id","telegram_code"],"title":"BindTelegramRequest"},"CancelSubscriptionRequest":{"properties":{"cancel_immediately":{"type":"boolean","title":"Cancel Immediately","default":false}},"type":"object","title":"CancelSubscriptionRequest"},"CreateSubscriptionRequest":{"properties":{"plan_id":{"type":"string","title":"Plan Id"}},"type":"object","required":["plan_id"],"title":"CreateSubscriptionRequest"},"GenericResponse":{"properties":{"message":{"type":"string","title":"Message"}},"type":"object","required":["message"],"title":"GenericResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"PaymentCallbackRequest":{"properties":{"payment_id":{"type":"string","title":"Payment Id"},"status":{"type":"string","title":"Status"},"signature":{"type":"string","title":"Signature"},"additional_data":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Additional Data"}},"type":"object","required":["payment_id","status","signature"],"title":"PaymentCallbackRequest","description":"Запрос от платежной системы (webhook)"},"PaymentInitiateRequest":{"properties":{"user_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"User Id"},"amount":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"string"}],"title":"Amount"},"currency":{"type":"string","maxLength":3,"minLength":3,"title":"Currency"},"payment_method":{"type":"string","title":"Payment Method"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"payment_type":{"anyOf":[{"type":"string","enum":["one_time","subscription"]},{"type":"null"}],"title":"Payment Type","default":"one_time"},"subscription_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Subscription Id"},"order_reference":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Order Reference"}},"type":"object","required":["amount","currency","payment_method"],"title":"PaymentInitiateRequest","description":"Запрос на инициацию платежа"},"PaymentInitiateResponse":{"properties":{"payment_id":{"type":"string","title":"Payment Id"},"payment_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Payment Url"},"message":{"type":"string","title":"Message"}},"type":"object","required":["payment_id","message"],"title":"PaymentInitiateResponse","description":"Ответ при создании платежа"},"PaymentItem":{"properties":{"user_id":{"type":"integer","title":"User Id","description":"ID пользователя"},"amount":{"type":"string","title":"Amount","description":"Сумма платежа"},"currency":{"type":"string","maxLength":3,"minLength":3,"title":"Currency","description":"Валюта платежа (например, USD, EUR, RUB)"},"payment_status":{"type":"string","enum":["pending","success","failed"],"title":"Payment Status","description":"Статус платежа"},"payment_type":{"type":"string","enum":["one_time","subscription"],"title":"Payment Type","description":"Тип платежа","default":"one_time"},"subscription_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Subscription Id","description":"ID подписки (если применимо)"},"order_reference":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Order Reference","description":"Код заказа (если применимо)"},"payment_method":{"type":"string","title":"Payment Method","description":"Способ оплаты","default":"Prodamus"},"transaction_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transaction Id","description":"ID транзакции (если есть)"},"payment_id":{"type":"string","title":"Payment Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["user_id","amount","currency","payment_status","payment_id","created_at"],"title":"PaymentItem","description":"История платежей"},"PaymentStatusResponse":{"properties":{"payment_id":{"type":"string","title":"Payment Id"},"payment_status":{"type":"string","title":"Payment Status","description":"Статус платежа: success, pending, failed и т.д."},"id":{"type":"integer","title":"Id","description":"Уникальный идентификатор платежа"},"transaction_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transaction Id","description":"Идентификатор транзакции в платежной системе"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"Время последнего обновления статуса платежа"}},"type":"object","required":["payment_id","payment_status","id","updated_at"],"title":"PaymentStatusResponse"},"RefundRequest":{"properties":{"payment_id":{"type":"string","title":"Payment Id"},"amount":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"string"},{"type":"null"}],"title":"Amount"}},"type":"object","required":["payment_id"],"title":"RefundRequest","description":"Запрос на возврат платежа"},"RefundResponse":{"properties":{"payment_id":{"type":"string","title":"Payment Id"},"refund_id":{"type":"string","title":"Refund Id"},"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["payment_id","refund_id","status","message"],"title":"RefundResponse","description":"Ответ при возврате платежа"},"RequestLog":{"properties":{"id":{"type":"integer","title":"Id"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"endpoint":{"type":"string","title":"Endpoint"},"method":{"type":"string","title":"Method"},"status_code":{"type":"integer","title":"Status Code"},"response_time":{"type":"number","title":"Response Time"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"}},"type":"object","required":["id","timestamp","endpoint","method","status_code","response_time"],"title":"RequestLog"},"RequestMetrics":{"properties":{"endpoint":{"type":"string","title":"Endpoint"},"total_requests":{"type":"integer","title":"Total Requests"},"average_response_time":{"type":"number","title":"Average Response Time"},"success_rate":{"type":"number","title":"Success Rate"}},"type":"object","required":["endpoint","total_requests","average_response_time","success_rate"],"title":"RequestMetrics"},"RequestSummary":{"properties":{"total_requests":{"type":"integer","title":"Total Requests"},"average_response_time":{"type":"number","title":"Average Response Time"},"requests_by_endpoint":{"type":"object","title":"Requests By Endpoint"}},"type":"object","required":["total_requests","average_response_time","requests_by_endpoint"],"title":"RequestSummary"},"SubscriptionPlan":{"properties":{"plan_id":{"type":"string","title":"Plan Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"price":{"type":"number","title":"Price"},"currency":{"type":"string","title":"Currency"},"period":{"type":"string","title":"Period"}},"type":"object","required":["plan_id","name","price","currency","period"],"title":"SubscriptionPlan"},"SubscriptionPlanCreate":{"properties":{"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name","description":"Название тарифного плана"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Описание тарифного плана"},"price":{"type":"number","exclusiveMinimum":0.0,"title":"Price","description":"Стоимость подписки"},"currency":{"type":"string","maxLength":10,"minLength":3,"title":"Currency","description":"Валюта подписки (например, RUB, USD, EUR)"},"billing_interval":{"type":"string","title":"Billing Interval","description":"Периодичность оплаты: daily, weekly, monthly, yearly"},"trial_period_days":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Trial Period Days","description":"Количество дней пробного периода","default":0},"external_plan_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"External Plan Id","description":"Идентификатор плана в платёжной системе (например, Prodamus)"}},"type":"object","required":["name","price","currency","billing_interval"],"title":"SubscriptionPlanCreate","description":"Схема валидации входных данных для создания нового тарифного плана подписки."},"SubscriptionPlanResponse":{"properties":{"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name","description":"Название тарифного плана"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Описание тарифного плана"},"price":{"type":"number","exclusiveMinimum":0.0,"title":"Price","description":"Стоимость подписки"},"currency":{"type":"string","maxLength":10,"minLength":3,"title":"Currency","description":"Валюта подписки (например, RUB, USD, EUR)"},"billing_interval":{"type":"string","title":"Billing Interval","description":"Периодичность оплаты: daily, weekly, monthly, yearly"},"trial_period_days":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Trial Period Days","description":"Количество дней пробного периода","default":0},"external_plan_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"External Plan Id","description":"Идентификатор плана в платёжной системе (например, Prodamus)"},"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["name","price","currency","billing_interval","id","created_at","updated_at"],"title":"SubscriptionPlanResponse","description":"Схема данных, возвращаемых API в ответ на запросы."},"SubscriptionPlanUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":100,"minLength":3},{"type":"null"}],"title":"Name","description":"Название тарифного плана"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Описание тарифного плана"},"price":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"null"}],"title":"Price","description":"Стоимость подписки"},"currency":{"anyOf":[{"type":"string","maxLength":10,"minLength":3},{"type":"null"}],"title":"Currency","description":"Валюта подписки"},"billing_interval":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Billing Interval","description":"Периодичность оплаты"},"trial_period_days":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Trial Period Days","description":"Количество дней пробного периода"},"external_plan_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"External Plan Id","description":"Идентификатор плана в платёжной системе"}},"type":"object","title":"SubscriptionPlanUpdate","description":"Схема валидации входных данных для обновления тарифного плана подписки."},"SubscriptionResponse":{"properties":{"subscription_id":{"type":"string","title":"Subscription Id"},"plan":{"$ref":"#/components/schemas/SubscriptionPlan"},"status":{"type":"string","title":"Status"},"start_date":{"type":"string","title":"Start Date"},"end_date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"End Date"}},"type":"object","required":["subscription_id","plan","status","start_date"],"title":"SubscriptionResponse"},"TelegramCodeResponse":{"properties":{"telegram_code":{"type":"string","title":"Telegram Code"}},"type":"object","required":["telegram_code"],"title":"TelegramCodeResponse"},"TelegramRegisterRequest":{"properties":{"telegram_id":{"type":"integer","title":"Telegram Id"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"username":{"type":"string","title":"Username"},"photo_url":{"type":"string","title":"Photo Url"},"auth_date":{"type":"integer","title":"Auth Date"},"email":{"type":"string","format":"email","title":"Email"},"phone":{"type":"string","title":"Phone"}},"type":"object","required":["telegram_id","first_name","last_name","username","photo_url","auth_date","email","phone"],"title":"TelegramRegisterRequest"},"TelegramUpdate":{"properties":{"update_id":{"type":"integer","title":"Update Id"},"message":{"type":"object","title":"Message"},"callback_query":{"type":"object","title":"Callback Query"}},"type":"object","required":["update_id"],"title":"TelegramUpdate"},"UpdateSubscriptionRequest":{"properties":{"new_plan_id":{"type":"string","title":"New Plan Id"}},"type":"object","required":["new_plan_id"],"title":"UpdateSubscriptionRequest"},"UserInfoResponse":{"properties":{"user_id":{"type":"string","title":"User Id"},"email":{"type":"string","format":"email","title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"telegram_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Telegram Id"},"first_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Name"},"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"},"photo_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Photo Url"}},"type":"object","required":["user_id","email","phone"],"title":"UserInfoResponse"},"UserResponse":{"properties":{"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Name"},"email":{"type":"string","format":"email","title":"Email"},"user_id":{"type":"string","title":"User Id"}},"type":"object","required":["email","user_id"],"title":"UserResponse","description":"Схема ответа с данными пользователя (без пароля)."},"UserUpdate":{"properties":{"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"password":{"anyOf":[{"type":"string","maxLength":255,"minLength":8},{"type":"null"}],"title":"Password"}},"type":"object","title":"UserUpdate","description":"Схема для обновления данных пользователя. Все поля опциональны."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"auth/token"}}}}}}